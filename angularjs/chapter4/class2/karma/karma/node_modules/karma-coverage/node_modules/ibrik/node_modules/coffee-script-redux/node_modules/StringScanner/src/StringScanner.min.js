(function(){var a;a=(function(){function b(c){this.str=c!=null?c:"";this.str=""+this.str;this.pos=0;this.lastMatch={reset:function(){this.str=null;this.captures=[];return this}}.reset();this}b.prototype.bol=function(){return this.pos<=0||(this.str[this.pos-1]==="\n")};b.prototype.captures=function(){return this.lastMatch.captures};b.prototype.check=function(d){var c;if(this.str.substr(this.pos).search(d)!==0){this.lastMatch.reset();return null}c=this.str.substr(this.pos).match(d);this.lastMatch.str=c[0];this.lastMatch.captures=c.slice(1);return this.lastMatch.str};b.prototype.checkUntil=function(d){var c,e;e=this.str.substr(this.pos).search(d);if(e<0){this.lastMatch.reset();return null}c=this.str.substr(this.pos+e).match(d);this.lastMatch.captures=c.slice(1);return this.lastMatch.str=this.str.substr(this.pos,e)+c[0]};b.prototype.clone=function(){var f,e,d,c;f=new this.constructor(this.str);f.pos=this.pos;f.lastMatch={};c=this.lastMatch;for(e in c){d=c[e];f.lastMatch[e]=d}return f};b.prototype.concat=function(c){this.str+=c;return this};b.prototype.eos=function(){return this.pos===this.str.length};b.prototype.exists=function(d){var c,e;e=this.str.substr(this.pos).search(d);if(e<0){this.lastMatch.reset();return null}c=this.str.substr(this.pos+e).match(d);this.lastMatch.str=c[0];this.lastMatch.captures=c.slice(1);return e};b.prototype.getch=function(){return this.scan(/./)};b.prototype.match=function(){return this.lastMatch.str};b.prototype.matches=function(c){this.check(c);return this.matchSize()};b.prototype.matched=function(){return this.lastMatch.str!=null};b.prototype.matchSize=function(){if(this.matched()){return this.match().length}else{return null}};b.prototype.peek=function(c){return this.str.substr(this.pos,c)};b.prototype.pointer=function(){return this.pos};b.prototype.setPointer=function(c){c=+c;if(c<0){c=0}if(c>this.str.length){c=this.str.length}return this.pos=c};b.prototype.reset=function(){this.lastMatch.reset();this.pos=0;return this};b.prototype.rest=function(){return this.str.substr(this.pos)};b.prototype.scan=function(d){var c;c=this.check(d);if(c!=null){this.pos+=c.length}return c};b.prototype.scanUntil=function(d){var c;c=this.checkUntil(d);if(c!=null){this.pos+=c.length}return c};b.prototype.skip=function(c){this.scan(c);return this.matchSize()};b.prototype.skipUntil=function(c){this.scanUntil(c);return this.matchSize()};b.prototype.string=function(){return this.str};b.prototype.terminate=function(){this.pos=this.str.length;this.lastMatch.reset();return this};b.prototype.toString=function(){return"#<StringScanner "+(this.eos()?"fin":""+this.pos+"/"+this.str.length+" @ "+(this.str.length>8?""+(this.str.substr(0,5))+"...":this.str))+">"};return b})();a.prototype.beginningOfLine=a.prototype.bol;a.prototype.clear=a.prototype.terminate;a.prototype.dup=a.prototype.clone;a.prototype.endOfString=a.prototype.eos;a.prototype.exist=a.prototype.exists;a.prototype.getChar=a.prototype.getch;a.prototype.position=a.prototype.pointer;a.StringScanner=a;module.exports=a}).call(this);