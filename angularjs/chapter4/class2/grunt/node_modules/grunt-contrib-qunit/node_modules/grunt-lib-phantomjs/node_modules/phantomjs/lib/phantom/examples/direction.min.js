(function(){var b,a,d,c;d=require("webpage").create();c=require("system");if(c.args.length<3){console.log("Usage: direction.coffee origin destination");console.log('Example: direction.coffee "San Diego" "Palo Alto"');phantom.exit(1)}else{a=c.args[1];b=c.args[2];d.open(encodeURI("http://maps.googleapis.com/maps/api/directions/xml?origin="+a+"&destination="+b+"&units=imperial&mode=driving&sensor=false"),function(f){var h,g,i,e;if(f!=="success"){console.log("Unable to access network")}else{g=d.content.match(/<html_instructions>(.*)<\/html_instructions>/ig);if(!g){console.log("No data available for "+a+" to "+b)}else{for(i=0,e=g.length;i<e;i++){h=g[i];h=h.replace(/\&lt;/ig,"<").replace(/\&gt;/ig,">");h=h.replace(/\<div/ig,"\n<div");h=h.replace(/<.*?>/g,"");console.log(h)}console.log("");console.log(d.content.match(/<copyrights>.*<\/copyrights>/ig).join("").replace(/<.*?>/g,""))}}return phantom.exit()})}}).call(this);