(function(){var a,e,d,f,b,c;d=function(){var h,g;h=void 0;g=void 0;h=0;g=arguments_.length;while(h<g){console.log("    arguments["+h+"] = "+JSON.stringify(arguments_[h]));++h}return console.log("")};c=require("system");e=require("webpage").create();a=false;f="http://en.wikipedia.org/wiki/DOM_events";b="http://en.wikipedia.org/wiki/DOM_events#Event_flow";if(c.args.length>1&&c.args[1]==="-v"){a=true}e.onInitialized=function(){console.log("page.onInitialized");return d.apply(this,arguments_)};e.onLoadStarted=function(){console.log("page.onLoadStarted");return d.apply(this,arguments_)};e.onLoadFinished=function(){console.log("page.onLoadFinished");return d.apply(this,arguments_)};e.onUrlChanged=function(){console.log("page.onUrlChanged");return d.apply(this,arguments_)};e.onNavigationRequested=function(){console.log("page.onNavigationRequested");return d.apply(this,arguments_)};if(a===true){e.onResourceRequested=function(){console.log("page.onResourceRequested");return d.apply(this,arguments_)};e.onResourceReceived=function(){console.log("page.onResourceReceived");return d.apply(this,arguments_)}}e.onClosing=function(){console.log("page.onClosing");return d.apply(this,arguments_)};e.onConsoleMessage=function(){console.log("page.onConsoleMessage");return d.apply(this,arguments_)};e.onAlert=function(){console.log("page.onAlert");return d.apply(this,arguments_)};e.onConfirm=function(){console.log("page.onConfirm");return d.apply(this,arguments_)};e.onPrompt=function(){console.log("page.onPrompt");return d.apply(this,arguments_)};setTimeout((function(){console.log("");console.log("### STEP 1: Load '"+f+"'");return e.open(f)}),0);setTimeout((function(){console.log("");console.log("### STEP 2: Load '"+b+"' (load same URL plus FRAGMENT)");return e.open(b)}),5000);setTimeout((function(){console.log("");console.log("### STEP 3: Click on page internal link (aka FRAGMENT)");return e.evaluate(function(){var g;g=document.createEvent("MouseEvents");g.initEvent("click",true,true);return document.querySelector("a[href='#Event_object']").dispatchEvent(g)})}),10000);setTimeout((function(){console.log("");console.log("### STEP 4: Click on page external link");return e.evaluate(function(){var g;g=document.createEvent("MouseEvents");g.initEvent("click",true,true);return document.querySelector("a[title='JavaScript']").dispatchEvent(g)})}),15000);setTimeout((function(){console.log("");console.log("### STEP 5: Close page and shutdown (with a delay)");e.close();return setTimeout((function(){return phantom.exit()}),100)}),20000)}).call(this);